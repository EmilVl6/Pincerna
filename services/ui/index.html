<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- Restrictive CSP: allow only self and Turnstile; disallow injected Cloudflare Insights beacon -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://challenges.cloudflare.com https://static.cloudflareinsights.com; script-src-elem 'self' https://challenges.cloudflare.com https://static.cloudflareinsights.com; connect-src 'self' https://accounts.google.com https://oauth2.googleapis.com https://*.cloudflareinsights.com; img-src 'self' data: https:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; frame-src https://challenges.cloudflare.com https://static.cloudflareinsights.com;">
  <base href="/cloud/">
  <script src="boot.js?v=3"></script>
  <script src="shim.js?v=3"></script>
  <title>Emil's Cloud Server</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles_sec.css?v=16">
  <link rel="icon" href="pincerna.svg" type="image/svg+xml">
  <script defer src="app.js?v=18"></script>
</head>
<body>
  <div id="preloader" class="preloader" aria-hidden="true">
    <div class="preloader-content">
      <img src="pincerna_anim.svg" alt="Loading" class="preloader-img">
      <div id="preloader-steps" class="preloader-progress"></div>
      <div id="preloader-indicator" class="preloader-indicator">Loading</div>
    </div>
  </div>

  <header class="site-header">
    <div class="brand">
      <div class="logo"><img src="pincerna.svg" alt="Pincerna logo" class="logo-img"></div>
      <div class="brand-text">Pincerna</div>
    </div>
    <div class="header-right">
      <span id="user-greeting" class="user-greeting"></span>
      <nav class="nav" aria-label="Main">
        <a href="#" id="nav-home" class="active">Dashboard</a>
        <a href="#" id="nav-streaming">Streaming</a>
        <a href="#" id="nav-files">Files</a>
        <a href="#" id="nav-about">About</a>
      </nav>
      <a href="#" id="btn-logout" class="signout-link">Sign out</a>
    </div>
  </header>

  <main class="wrap container">
    <section class="card" id="hero" style="display:none">
      <h1 id="welcome-title">Pincerna Cloud</h1>
      <p class="lead">Emil's Cloud Server!</p>
      <div class="row">
        <div>
          <button id="btn-access-local" class="btn primary">Stream</button>
          <button id="btn-view-network" class="btn">Access Local Files</button>
        </div>
      </div>
    </section>

    <section class="card" id="streaming-panel" style="display:none">
      <h2>Streaming</h2>
      <div id="streaming-files" style="margin-top:12px"></div>
    </section>

    <!-- Video Modal -->
    <div id="video-modal" class="modal" style="display:none">
      <div class="modal-content video-modal-content">
        <video id="modal-video" controls preload="metadata">
          Your browser does not support the video tag.
        </video>
        <button id="close-modal" class="close-btn">&times;</button>
      </div>
    </div>

    <section class="card" id="controls" style="display:none">
      <h2>Quick Actions</h2>
      <div class="grid">
        <button id="btn-metrics" class="btn">View Metrics</button>
        <button id="btn-restart" class="btn warn">Restart Service</button>
      </div>
    </section>

    <section class="card" id="metrics" style="display:none">
      <h2>System Metrics</h2>
      <div class="metrics-grid">

        <div class="metric-widget">
          <div class="metric-icon">▣</div>
          <div class="metric-value" id="metric-cpu">--%</div>
          <div class="metric-label">CPU</div>
          <div class="metric-sub" id="metric-cpu-temp"></div>
        </div>

        <div class="metric-widget">
          <div class="metric-icon">≡</div>
          <div class="metric-value" id="metric-memory">--%</div>
          <div class="metric-label">Memory</div>
          <div class="metric-sub" id="metric-memory-detail"></div>
        </div>

        <div class="metric-widget">
          <div class="metric-icon">⬒</div>
          <div class="metric-value" id="metric-disk">--%</div>
          <div class="metric-label">Disk</div>
          <div class="metric-sub" id="metric-disk-detail"></div>
        </div>

        <div class="metric-widget">
          <div class="metric-icon">↔</div>
          <div class="metric-value" id="metric-network">--</div>
          <div class="metric-label">Network</div>
          <div class="metric-sub" id="metric-network-detail"></div>
        </div>

        <div class="metric-widget">
          <div class="metric-icon">◷</div>
          <div class="metric-value" id="metric-uptime">--</div>
          <div class="metric-label">Uptime</div>
          <div class="metric-sub" id="metric-load"></div>
        </div>

        <div class="metric-widget">
          <div class="metric-icon">⚙︎</div>
          <div class="metric-value" id="metric-processes">--</div>
          <div class="metric-label">Processes</div>
          <div class="metric-sub" id="metric-cores"></div>
        </div>

      </div>
    </section>

    <section class="card" id="files" style="display:none">
      <h2>Files</h2>
      <div style="margin-bottom:12px">
        <p style="margin:6px 0;color:var(--muted)">Browse folders mounted under the configured files root. Each attached drive will be mounted as a subfolder.</p>
      </div>
      <div class="file-controls row">
        <div class="file-actions-left">
          <label class="btn" id="upload-btn">
            <span id="upload-btn-text">Upload</span>
            <input id="file-input" type="file" style="display:none" multiple>
          </label>
          <button id="btn-new-folder" class="btn">New Folder</button>
          <button id="btn-refresh-files" class="btn">Refresh</button>
        </div>
        <div class="file-path-display">
          <span class="file-path-label">Path:</span>
          <span class="status" id="files-path">/</span>
        </div>
      </div>
      <div id="files-streaming-area" style="margin-top:12px"></div>
      <div id="upload-progress" class="upload-progress" style="display:none">
        <div class="upload-progress-bar">
          <div class="upload-progress-fill" id="upload-fill"></div>
        </div>
        <span id="upload-status">Uploading</span>
      </div>
      <div id="file-list" class="file-list">
      </div>
    </section>
      <div id="file-context-menu" class="context-menu" style="display:none">
      <div class="context-item" id="ctx-download">Download</div>
      <div class="context-item" id="ctx-rename">Rename</div>
      <div class="context-item" id="ctx-move">Move to </div>
      <div class="context-divider"></div>
      <div class="context-item danger" id="ctx-delete">Delete</div>
    </div>

    <section class="card" id="about" style="display:none">
      <h2>About</h2>
      <p class="lead">Pincerna is a Pi hosted cloud server framework. To learn more check out the <a href="https://github.com/EmilVl6/Pincerna" target="_blank" rel="noopener noreferrer">Github Repo</a></p>
    </section>
  </main>

  <footer class="site-footer">Pincerna™ - cloud.emilvinod.com</footer>
</body>
</html>