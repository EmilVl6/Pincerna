<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <base href="/cloud/">
  <script>
    (function(){ try{ if(!localStorage.getItem('pincerna_token')){ window.location.href = 'auth.html'; } }catch(e){} })();
  </script>
  <title>Emil's Cloud Server</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles_sec.css">
  <link rel="icon" href="pincerna.svg" type="image/svg+xml">
  <script defer src="app.js"></script>
</head>
<body>
  <div id="preloader" class="preloader" aria-hidden="true">
    <div class="preloader-content">
      <img src="pincerna_anim.svg" alt="Loading" class="preloader-img">
      <div id="preloader-steps" class="preloader-progress"></div>
      <div id="preloader-indicator" class="preloader-indicator">Loading</div>
    </div>
  </div>

  <header class="site-header">
    <div class="brand">
      <div class="logo"><img src="pincerna.svg" alt="Pincerna logo" class="logo-img"></div>
      <div class="brand-text">Pincerna</div>
    </div>
    <div class="header-right">
      <span id="user-greeting" class="user-greeting"></span>
      <nav class="nav" aria-label="Main">
        <a href="#" id="nav-home" class="active">Dashboard</a>
        <a href="#" id="nav-network">Network</a>
        <a href="#" id="nav-files">Files</a>
        <a href="#" id="nav-about">About</a>
      </nav>
      <a href="#" id="btn-logout" class="signout-link">Sign out</a>
    </div>
  </header>

  <main class="wrap container">
    <section class="card" id="hero" style="display:none">
      <h1 id="welcome-title">Welcome to Pincerna Cloud</h1>
      <p class="lead">Emil's Cloud Server!</p>
      <div class="row">
        <div>
          <button id="btn-access-local" class="btn primary">Access Local Files</button>
          <button id="btn-view-network" class="btn">View Home Network</button>
        </div>
      </div>
    </section>

    <!-- Network/LAN Panel -->
    <section class="card" id="network-panel" style="display:none">
      <h2>Home Network</h2>
      <div class="network-header">
        <div class="network-status">
          <span class="network-status-dot connected"></span>
          <span id="network-status-text">Connected to local network</span>
        </div>
        <div class="network-actions">
          <button id="btn-toggle-view" class="btn">Map View</button>
          <button id="btn-scan-network" class="btn primary">Scan Network</button>
        </div>
      </div>
      <div id="network-scanning" class="network-scanning" style="display:none">
        <div class="scanning-spinner"></div>
        <span>Scanning network...</span>
      </div>
      <div id="network-devices" class="network-devices-grid">
        <!-- Devices will be populated here -->
      </div>
      <div id="network-empty" class="network-empty" style="display:none">
        <p>No devices found. Click "Scan Network" to discover devices.</p>
      </div>
    </section>

    <section class="card" id="controls" style="display:none">
      <h2>Quick Actions</h2>
      <div class="grid">
        <button id="btn-metrics" class="btn">View Metrics</button>
        <button id="btn-restart" class="btn warn">Restart Service</button>
      </div>
    </section>

    <section class="card" id="metrics" style="display:none">
      <h2>System Metrics</h2>
      <div class="metrics-grid">
        <div class="metric-widget" id="widget-cpu">
          <div class="metric-icon">✸</div>
          <div class="metric-value" id="metric-cpu">--%</div>
          <div class="metric-label">CPU</div>
          <div class="metric-sub" id="metric-cpu-temp"></div>
        </div>
        <div class="metric-widget" id="widget-memory">
          <div class="metric-icon">✢</div>
          <div class="metric-value" id="metric-memory">--%</div>
          <div class="metric-label">Memory</div>
          <div class="metric-sub" id="metric-memory-detail"></div>
        </div>
        <div class="metric-widget" id="widget-disk">
          <div class="metric-icon">✤</div>
          <div class="metric-value" id="metric-disk">--%</div>
          <div class="metric-label">Disk</div>
          <div class="metric-sub" id="metric-disk-detail"></div>
        </div>
        <div class="metric-widget" id="widget-network">
          <div class="metric-icon">⁂</div>
          <div class="metric-value" id="metric-network">--</div>
          <div class="metric-label">Network</div>
          <div class="metric-sub" id="metric-network-detail"></div>
        </div>
        <div class="metric-widget" id="widget-uptime">
          <div class="metric-icon">⏱</div>
          <div class="metric-value" id="metric-uptime">--</div>
          <div class="metric-label">Uptime</div>
          <div class="metric-sub" id="metric-load"></div>
        </div>
        <div class="metric-widget" id="widget-processes">
          <div class="metric-icon">✺</div>
          <div class="metric-value" id="metric-processes">--</div>
          <div class="metric-label">Processes</div>
          <div class="metric-sub" id="metric-cores"></div>
        </div>
      </div>
      <div class="metrics-refresh">
        <button id="btn-refresh-metrics" class="btn">Refresh Metrics</button>
        <span id="metrics-last-update" class="meta"></span>
      </div>
    </section>

    <section class="card" id="files" style="display:none">
      <h2>Files</h2>
      <div class="file-controls row">
        <div class="file-actions-left">
          <label class="btn" id="upload-btn">
            <span id="upload-btn-text">Upload</span>
            <input id="file-input" type="file" style="display:none" multiple>
          </label>
          <button id="btn-new-folder" class="btn">New Folder</button>
          <button id="btn-refresh-files" class="btn">Refresh</button>
        </div>
        <div class="file-path-display">
          <span class="file-path-label">Path:</span>
          <span class="status" id="files-path">/</span>
        </div>
      </div>
      <div id="upload-progress" class="upload-progress" style="display:none">
        <div class="upload-progress-bar">
          <div class="upload-progress-fill" id="upload-fill"></div>
        </div>
        <span id="upload-status">Uploading</span>
      </div>
      <div id="file-list" class="file-list">
      </div>
    </section>
      <div id="file-context-menu" class="context-menu" style="display:none">
      <div class="context-item" id="ctx-download">Download</div>
      <div class="context-item" id="ctx-rename">Rename</div>
      <div class="context-item" id="ctx-move">Move to </div>
      <div class="context-divider"></div>
      <div class="context-item danger" id="ctx-delete">Delete</div>
    </div>

    <section class="card" id="about" style="display:none">
      <h2>About</h2>
      <p class="lead">Emil's Bartender (A SERVER WITH RSA [Not the cryptography])</p>
    </section>
  </main>

  <footer class="site-footer">Pincerna : cloud.emilvinod.com</footer>
</body>
</html>
